'use strict';

var _Set = require('babel-runtime/core-js/set')['default'];

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports['default'] = getEnvFromComments;

var _environment = require('../environment');

var meteorEnvRegEx = /^eslint-meteor-env (client|server)\s?(,\s?(client|server))*$/;

function getEnvFromComments() {
  var comments = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];

  var envs = new _Set();
  comments.forEach(function (comment) {
    var trimmedValue = comment.value.replace(/\s\s+/g, ' ') // multiple spaces and newlines to one space
    .trim();
    if (meteorEnvRegEx.test(trimmedValue)) {
      trimmedValue.substr(18).replace(/\s+/g, '').split(',').map(function (env) {
        return envs.add(env);
      });
    }
  });
  if (envs.has('client') && envs.has('server')) {
    return _environment.UNIVERSAL;
  } else if (envs.has('client')) {
    return _environment.CLIENT;
  } else if (envs.has('server')) {
    return _environment.SERVER;
  }
  return false;
}

module.exports = exports['default'];