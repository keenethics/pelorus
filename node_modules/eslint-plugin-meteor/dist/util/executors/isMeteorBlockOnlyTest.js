'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports['default'] = isMeteorBlockOnlyTest;

var _ast = require('../ast');

/**
 * Verifies a test of an IfStatement contains only checks with
 * Meteor.isClient, Meteor.isServer and Meteor.isCordova.
 *
 * @param {node} test Test of an IfStatement (MemberExpression, LogicalExpression, UnaryExpression)
 * @return {Boolean} True if test contains only Meteor locus checks
 */

function isMeteorBlockOnlyTest(_x) {
  var _left;

  var _again = true;

  _function: while (_again) {
    var test = _x;
    _again = false;

    switch (test.type) {
      case 'MemberExpression':
        return (0, _ast.isMeteorProp)(test, 'isClient') || (0, _ast.isMeteorProp)(test, 'isServer') || (0, _ast.isMeteorProp)(test, 'isCordova');
      case 'UnaryExpression':
        if (test.operator === '!') {
          _x = test.argument;
          _again = true;
          continue _function;
        }
        return false;
      case 'LogicalExpression':
        if (!(_left = isMeteorBlockOnlyTest(test.left))) {
          return _left;
        }

        _x = test.right;
        _again = true;
        continue _function;

      default:
        return false;
    }
  }
}

module.exports = exports['default'];